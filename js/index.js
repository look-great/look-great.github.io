!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="//static.hsappstatic.net/HubspotToolsMenu/static-1.119/",n(n.s=7)}([function(e,t){e.exports="//static.hsappstatic.net/HubspotToolsMenu/static-1.119/js/sprocket_white.svg"},function(e,t){e.exports="//static.hsappstatic.net/HubspotToolsMenu/static-1.119/js/sprocket_orange.svg"},function(e,t){e.exports="//static.hsappstatic.net/HubspotToolsMenu/static-1.119/css/toolsmenu.css"},,,,,function(e,t,n){"use strict";n.r(t);var o="https://local.hsappstatic.net/HubspotToolsMenu/static/js/index.js",r=function(){return!!window.localStorage.getItem("HS_SPROCKET_MENU_LOCAL_OVERRIDE")&&!Array.from(document.body.getElementsByTagName("script")).some((function(e){return e.src===o}))};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}r()&&function(){var e=document.createElement("script");e.src=o,e.onload=function(){setTimeout((function(){var e=new Event("DOMContentLoaded");document.dispatchEvent(e)}),100)},document.body.appendChild(e)}();var c=n(0),l=n.n(c),u=n(1),d=n.n(u),p=n(2),m=n.n(p),f=function(){function e(t){i(this,e),this.baseUrl=this.getHsBaseUrl(t.app_hs_base_url),this.cpBaseUrl=this.getHsBaseUrl(t.cp_hs_base_url),this.contentId=t.dynamic_page_id&&"0"!==t.dynamic_page_id&&"null"!==t.dynamic_page_id?t.dynamic_page_id:t.page_id,this.categoryId=t.category_id,this.contentGroupId=t.content_group_id,this.portalId=t.portal_id,this.environments={PRODUCTION:1,STAGING:2},this.isCustomerPortal=!0===t.is_customer_portal,this.cmsEnvironment=this.getCmsEnvironmentFromCookie(),this.permissionObj={}}return a(e,[{key:"getHsBaseUrl",value:function(e){return window.localStorage.getItem("HS_LOCAL_TESTING")?e.replace(/[^/](\w+?)(?=\.)/,"local"):e}},{key:"createElementFromHTML",value:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}},{key:"jsonp",value:function(e,t){window.jsonpHandler=function(e){t(e)};var n=e+(-1!==e.indexOf("?")?"&":"?")+"callback=jsonpHandler",o=document.createElement("script");o.type="text/javascript",o.referrerPolicy="no-referrer-when-downgrade",o.async=!0,o.src=n,document.getElementsByTagName("head")[0].appendChild(o)}},{key:"httpGet",value:function(e,t){var n=new XMLHttpRequest;n.withCredentials=!0,n.onreadystatechange=function(){4===this.readyState&&200===this.status&&t(JSON.parse(this.responseText))},n.open("GET",e,!0),n.send()}},{key:"showToolsMenuIfAuthor",value:function(){var e=this;if(window.location===window.parent.location&&-1===window.location.pathname.indexOf("_hcms/preview/template")){var t,n=this.contentId,o=!1;this.isCustomerPortal?t="customer-portal":this.contentId&&this.contentGroupId?t=7===this.categoryId?"blog-listing-pages":6===this.categoryId?"knowledge-articles":"blog-posts":this.contentGroupId?(t=6===this.categoryId?"knowledge-bases":"blogs",n=this.contentGroupId):window.location.pathname.endsWith("_hcms/mem/login")?t="content-membership":(o=!0,t="landing-pages");var r=this.baseUrl+"/content-tools-menu/api/v1/tools-menu/has-permission?portalId="+this.portalId;this.jsonp(r,(function(r){if(r.has_permission){var i=e.cpBaseUrl+"/content-tools-menu/api/v1/tools-menu/permissions?portalId="+e.portalId;e.httpGet(i,(function(r){e.permissionObj=r,"content-membership"===t?e.getContentMembershipCookie(t,e.portalId):e.getAppLinks(t,n,e.portalId),o&&e.setupDeferredPrefetchingOfEditorAssets(t)}))}}))}}},{key:"getContentMembershipCookie",value:function(e,t){var n=this;this.jsonp(this.baseUrl+"/content-tools-menu/api/v1/content/validate-hubspot-user?redirect_url="+window.location.href+"&portalId="+t,(function(e){if(e&&e.verified){var t=n.getUrlParameter("redirect_url");window.location.href=""===t?window.location.origin:t}}))}},{key:"getAppLinks",value:function(e,t,n){var o=this;this.jsonp(this.baseUrl+"/content-tools-menu/api/v1/tools-menu/"+e+"/"+t+"/actions?portalId="+n,(function(e){e.actions&&e.strings&&o.showAppLinks(e.actions,e.strings)}))}},{key:"showAppLinks",value:function(e,t){var n=[].slice.call(document.querySelectorAll("[data-menu-id]")).filter((function(e){return!!e.getAttribute("data-menu-id").trim()})),o=n.length>0?n[0]:null;if(null!==o){var r=o.getAttribute("data-menu-id").trim();e.push([t.EDIT_NAVIGATION_MENU,this.baseUrl+"/menus/"+this.portalId+"/edit/"+r])}var i="";e.forEach((function(e){i+="        <li><a target='_blank' href='"+e[1]+"'>\n        "+e[0]+"\n        </a></li>      "})),this.permissionObj.permissions.includes("CAN_PREVIEW_ENVIRONMENTS")&&(i+='        <li><a class="hs-environment-buffer-on">'+t.VIEW_BUFFER+'</a></li>        <li><a class="hs-environment-buffer-off">'+t.VIEW_HARD+"</a></li>      ",i+='        <li><a class="hs-environment-staging">'+t.VIEW_STAGING+'</a></li>        <li><a class="hs-environment-production">'+t.VIEW_PRODUCTION+"</a></li>      ");var s='<link rel="stylesheet" href="'+m.a+'" />',a='\n      <div role="button" class="hs-tools-menu hs-collapsed" aria-expanded="false">\n        <img class="hs-sprocket" alt="'+t.MENU_ICON_ALT_TEXT+'" src="'+l.a+'" />\n        <div class="hs-dropdown">\n          <div class="hs-title">'+t.MENU_TITLE+"</div>\n          <ul>\n            "+i+'\n            <li>\n              <a role="button" href="#hide-menu" class="hs-menu-hider">'+t.HIDE_THIS_MENU+"</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    ";document.body.appendChild(this.createElementFromHTML(s)),document.body.appendChild(this.createElementFromHTML(a)),this.registerEvents()}},{key:"registerEvents",value:function(){var e=this,t=document.querySelector(".hs-tools-menu");this.registerDropdown(t),t.querySelector(".hs-menu-hider").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t.style.display="none"}));var n=t.querySelector(".hs-environment-buffer-on");n&&(this.cmsEnvironment.buffer?n.parentElement.removeChild(n):n.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.requestAndSetEnvironmentCookie(e.portalId,!0,e.cmsEnvironment.environmentId)})));var o=t.querySelector(".hs-environment-buffer-off");o&&(this.cmsEnvironment.buffer?o.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.requestAndSetEnvironmentCookie(e.portalId,!1,e.cmsEnvironment.environmentId)})):o.parentElement.removeChild(o));var r=t.querySelector(".hs-environment-staging");r&&(this.cmsEnvironment.environmentId!==this.environments.STAGING?r.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.requestAndSetEnvironmentCookie(e.portalId,e.cmsEnvironment.buffer,e.environments.STAGING)})):r.parentElement.removeChild(r));var i=t.querySelector(".hs-environment-production");i&&(this.cmsEnvironment.environmentId!==this.environments.PRODUCTION?i.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.requestAndSetEnvironmentCookie(e.portalId,e.cmsEnvironment.buffer,e.environments.PRODUCTION)})):i.parentElement.removeChild(i))}},{key:"requestAndSetEnvironmentCookie",value:function(e,t,n){var o=this.cpBaseUrl+"/content-tools-menu/api/v1/tools-menu/environment-cookie?portalId="+e+"&environmentId="+n+"&buffer="+t;this.httpGet(o,(function(e){document.cookie="hs_cms_environment="+btoa(JSON.stringify(e)),window.location.reload()}))}},{key:"registerDropdown",value:function(e){var t=Array.from(e.children).find((function(e){return e.classList.contains("hs-sprocket")})),n=function(){e.classList.add("hs-collapsed"),e.setAttribute("aria-expanded",!1),t.setAttribute("src",l.a)},o=function(){e.classList.remove("hs-collapsed"),e.setAttribute("aria-expanded",!0),t.setAttribute("src",d.a)},r=function e(){n(),document.body.removeEventListener("click",e)};e.addEventListener("click",(function(t){t.target.getAttribute("href")||(t.preventDefault(),t.stopPropagation(),e.classList.contains("hs-collapsed")?(o(),document.body.addEventListener("click",r)):(n(),document.body.removeEventListener("click",r)))}),!1)}},{key:"getUrlParameter",value:function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}},{key:"getCmsEnvironmentFromCookie",value:function(){var e=this.getCookie("hs_cms_environment");return e?JSON.parse(atob(e)):{portalId:0,environmentId:this.environments.PRODUCTION,buffer:!1,createdAt:0}}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}},{key:"setupDeferredPrefetchingOfEditorAssets",value:function(e){var t=this;window.addEventListener("load",(function(){setTimeout((function(){if("landing-pages"===e){"content/editor/prefetcher.js";var n=document.createElement("script");n.src=t.baseUrl+"/content/editor/prefetcher.js",document.head.appendChild(n)}}),2e3)}))}}]),e}(),h=function(){function e(){i(this,e),this.getShowAllFiltersLinkEventHandler=function(e){return function(t){var n=e.previousElementSibling.children;n&&[].slice.call(n,0).forEach((function(e){e.style.display="block"})),e.style.display="none",t.preventDefault(),t.stopPropagation()}}}return a(e,[{key:"setup",value:function(){var e=this;[].slice.call(document.querySelectorAll(".filter-expand-link"),0).forEach((function(t){t.addEventListener("click",e.getShowAllFiltersLinkEventHandler(t))}))}}]),e}(),v=function(){new f(window.hsVars).showToolsMenuIfAuthor(),(new h).setup()};r()||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function e(){v(),document.removeEventListener("DOMContentLoaded",e)}),!1):v()),t.default=f}]);